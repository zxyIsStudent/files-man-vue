{"ast":null,"code":"import axios from 'axios';\nimport Message from '@/utils/Message';\nimport Storage from '@/utils/DeviceStorage';\nimport { ElLoading } from 'element-plus';\nconst service = axios.create({\n  baseURL: 'http://192.168.1.11:8081/' //地址\n\n});\nservice.interceptors.request.use(config => {\n  config.headers[\"token\"] = Storage.get('token');\n  return config;\n}, error => {\n  Promise.reject(error);\n});\nvar loadinginstace;\nservice.interceptors.request.use(config => {\n  loadinginstace = ElLoading.service({\n    lock: true,\n    text: '努力加载~'\n  });\n  return config;\n}, error => {\n  loadinginstace.close();\n  Message.error('网络不给力,请稍后再试');\n  return Promise.reject(error);\n});\nservice.interceptors.response.use(response => {\n  if (response.headers !== \"application/json\") {\n    loadinginstace.close();\n    return response.data;\n  } else {\n    const res = response.data;\n\n    if (res.code !== 200) {\n      loadinginstace.close();\n      Message.error(res.message);\n\n      if (res.code === 401) {}\n\n      return Promise.reject(\"error\");\n    } else {\n      loadinginstace.close();\n      return response.data;\n    }\n  }\n}, error => {\n  loadinginstace.close();\n  Message.error('请求失败');\n  return Promise.reject(error);\n});\nexport default service;","map":{"version":3,"names":["axios","Message","Storage","ElLoading","service","create","baseURL","interceptors","request","use","config","headers","get","error","Promise","reject","loadinginstace","lock","text","close","response","data","res","code","message"],"sources":["/Users/zhaoxiangyuan/Downloads/归档/src/utils/DataUtil.js"],"sourcesContent":["import axios from 'axios';\nimport Message from '@/utils/Message';\nimport Storage from '@/utils/DeviceStorage';\n\nimport { ElLoading } from 'element-plus'\n\n\n\nconst service = axios.create({\n    baseURL: 'http://192.168.1.11:8081/', //地址\n});\nservice.interceptors.request.use(\n    (config) => {\n        config.headers[\"token\"] = Storage.get('token')\n        return config;\n    },\n    (error) => {\n        Promise.reject(error);\n    }\n);\n\nvar loadinginstace\nservice.interceptors.request.use(config => {\n    loadinginstace = ElLoading.service({ lock: true, text: '努力加载~' })\n    return config\n}, error => {\n    loadinginstace.close();\n    Message.error('网络不给力,请稍后再试');\n    return Promise.reject(error)\n})\n\nservice.interceptors.response.use(\n    (response) => {\n        if (response.headers !== \"application/json\") {\n            loadinginstace.close();\n            return response.data;\n        } else {\n            const res = response.data;\n            if (res.code !== 200) {\n                loadinginstace.close();\n                Message.error(res.message);\n                if (res.code === 401) {\n                }\n                return Promise.reject(\"error\");\n            } else {\n                loadinginstace.close();\n                return response.data;\n            }\n        }\n\n\n    },\n    (error) => {\n        loadinginstace.close();\n        Message.error('请求失败');\n        return Promise.reject(error);\n    }\n);\n\nexport default service;"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AAEA,SAASC,SAAT,QAA0B,cAA1B;AAIA,MAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;EACzBC,OAAO,EAAE,2BADgB,CACa;;AADb,CAAb,CAAhB;AAGAF,OAAO,CAACG,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACKC,MAAD,IAAY;EACRA,MAAM,CAACC,OAAP,CAAe,OAAf,IAA0BT,OAAO,CAACU,GAAR,CAAY,OAAZ,CAA1B;EACA,OAAOF,MAAP;AACH,CAJL,EAKKG,KAAD,IAAW;EACPC,OAAO,CAACC,MAAR,CAAeF,KAAf;AACH,CAPL;AAUA,IAAIG,cAAJ;AACAZ,OAAO,CAACG,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiCC,MAAM,IAAI;EACvCM,cAAc,GAAGb,SAAS,CAACC,OAAV,CAAkB;IAAEa,IAAI,EAAE,IAAR;IAAcC,IAAI,EAAE;EAApB,CAAlB,CAAjB;EACA,OAAOR,MAAP;AACH,CAHD,EAGGG,KAAK,IAAI;EACRG,cAAc,CAACG,KAAf;EACAlB,OAAO,CAACY,KAAR,CAAc,aAAd;EACA,OAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAPD;AASAT,OAAO,CAACG,YAAR,CAAqBa,QAArB,CAA8BX,GAA9B,CACKW,QAAD,IAAc;EACV,IAAIA,QAAQ,CAACT,OAAT,KAAqB,kBAAzB,EAA6C;IACzCK,cAAc,CAACG,KAAf;IACA,OAAOC,QAAQ,CAACC,IAAhB;EACH,CAHD,MAGO;IACH,MAAMC,GAAG,GAAGF,QAAQ,CAACC,IAArB;;IACA,IAAIC,GAAG,CAACC,IAAJ,KAAa,GAAjB,EAAsB;MAClBP,cAAc,CAACG,KAAf;MACAlB,OAAO,CAACY,KAAR,CAAcS,GAAG,CAACE,OAAlB;;MACA,IAAIF,GAAG,CAACC,IAAJ,KAAa,GAAjB,EAAsB,CACrB;;MACD,OAAOT,OAAO,CAACC,MAAR,CAAe,OAAf,CAAP;IACH,CAND,MAMO;MACHC,cAAc,CAACG,KAAf;MACA,OAAOC,QAAQ,CAACC,IAAhB;IACH;EACJ;AAGJ,CApBL,EAqBKR,KAAD,IAAW;EACPG,cAAc,CAACG,KAAf;EACAlB,OAAO,CAACY,KAAR,CAAc,MAAd;EACA,OAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAzBL;AA4BA,eAAeT,OAAf"},"metadata":{},"sourceType":"module"}