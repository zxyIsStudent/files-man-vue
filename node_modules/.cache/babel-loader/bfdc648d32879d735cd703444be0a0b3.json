{"ast":null,"code":"import { ref, watchEffect, watch, unref, computed, onMounted, nextTick, onBeforeUnmount } from 'vue';\nimport '../../../../utils/index2.mjs';\nimport '../../../../hooks/index2.mjs';\nimport { parseHeight } from '../util2.mjs';\nimport { addResizeListener, removeResizeListener } from '../../../../utils/dom/resize-event2.mjs';\nimport { on, off } from '../../../../utils/dom/event2.mjs';\nimport { useSize } from '../../../../hooks/use-common-props/index2.mjs';\nimport { isString } from '@vue/shared';\nimport { isNumber } from '@vueuse/core';\n\nfunction useStyle(props, layout, store, table) {\n  const isHidden = ref(false);\n  const renderExpanded = ref(null);\n  const resizeProxyVisible = ref(false);\n\n  const setDragVisible = visible => {\n    resizeProxyVisible.value = visible;\n  };\n\n  const resizeState = ref({\n    width: null,\n    height: null\n  });\n  const isGroup = ref(false);\n  const scrollbarViewStyle = {\n    display: \"inline-block\",\n    verticalAlign: \"middle\"\n  };\n  const tableWidth = ref();\n  watchEffect(() => {\n    layout.setHeight(props.height);\n  });\n  watchEffect(() => {\n    layout.setMaxHeight(props.maxHeight);\n  });\n  watch(() => [props.currentRowKey, store.states.rowKey], ([currentRowKey, rowKey]) => {\n    if (!unref(rowKey)) return;\n    store.setCurrentRowKey(`${currentRowKey}`);\n  }, {\n    immediate: true\n  });\n  watch(() => props.data, data => {\n    table.store.commit(\"setData\", data);\n  }, {\n    immediate: true,\n    deep: true\n  });\n  watchEffect(() => {\n    if (props.expandRowKeys) {\n      store.setExpandRowKeysAdapter(props.expandRowKeys);\n    }\n  });\n\n  const handleMouseLeave = () => {\n    table.store.commit(\"setHoverRow\", null);\n    if (table.hoverState) table.hoverState = null;\n  };\n\n  const handleHeaderFooterMousewheel = (event, data) => {\n    const {\n      pixelX,\n      pixelY\n    } = data;\n\n    if (Math.abs(pixelX) >= Math.abs(pixelY)) {\n      table.refs.bodyWrapper.scrollLeft += data.pixelX / 5;\n    }\n  };\n\n  const shouldUpdateHeight = computed(() => {\n    return props.height || props.maxHeight || store.states.fixedColumns.value.length > 0 || store.states.rightFixedColumns.value.length > 0;\n  });\n  const tableBodyStyles = computed(() => {\n    return {\n      width: layout.bodyWidth.value ? `${layout.bodyWidth.value}px` : \"\"\n    };\n  });\n\n  const doLayout = () => {\n    if (shouldUpdateHeight.value) {\n      layout.updateElsHeight();\n    }\n\n    layout.updateColumnsWidth();\n    requestAnimationFrame(syncPostion);\n  };\n\n  onMounted(async () => {\n    await nextTick();\n    store.updateColumns();\n    bindEvents();\n    requestAnimationFrame(doLayout);\n    const el = table.vnode.el;\n\n    if (props.flexible && el && el.parentElement) {\n      el.parentElement.style.minWidth = \"0\";\n    }\n\n    resizeState.value = {\n      width: tableWidth.value = el.offsetWidth,\n      height: el.offsetHeight\n    };\n    store.states.columns.value.forEach(column => {\n      if (column.filteredValue && column.filteredValue.length) {\n        table.store.commit(\"filterChange\", {\n          column,\n          values: column.filteredValue,\n          silent: true\n        });\n      }\n    });\n    table.$ready = true;\n  });\n\n  const setScrollClassByEl = (el, className) => {\n    if (!el) return;\n    const classList = Array.from(el.classList).filter(item => !item.startsWith(\"is-scrolling-\"));\n    classList.push(layout.scrollX.value ? className : \"is-scrolling-none\");\n    el.className = classList.join(\" \");\n  };\n\n  const setScrollClass = className => {\n    const {\n      tableWrapper\n    } = table.refs;\n    setScrollClassByEl(tableWrapper, className);\n  };\n\n  const hasScrollClass = className => {\n    const {\n      tableWrapper\n    } = table.refs;\n    return !!(tableWrapper && tableWrapper.classList.contains(className));\n  };\n\n  const syncPostion = function () {\n    if (!table.refs.scrollBarRef) return;\n\n    if (!layout.scrollX.value) {\n      const scrollingNoneClass = \"is-scrolling-none\";\n\n      if (!hasScrollClass(scrollingNoneClass)) {\n        setScrollClass(scrollingNoneClass);\n      }\n\n      return;\n    }\n\n    const scrollContainer = table.refs.scrollBarRef.wrap$;\n    if (!scrollContainer) return;\n    const {\n      scrollLeft,\n      offsetWidth,\n      scrollWidth\n    } = scrollContainer;\n    const {\n      headerWrapper,\n      footerWrapper\n    } = table.refs;\n    if (headerWrapper) headerWrapper.scrollLeft = scrollLeft;\n    if (footerWrapper) footerWrapper.scrollLeft = scrollLeft;\n    const maxScrollLeftPosition = scrollWidth - offsetWidth - 1;\n\n    if (scrollLeft >= maxScrollLeftPosition) {\n      setScrollClass(\"is-scrolling-right\");\n    } else if (scrollLeft === 0) {\n      setScrollClass(\"is-scrolling-left\");\n    } else {\n      setScrollClass(\"is-scrolling-middle\");\n    }\n  };\n\n  const bindEvents = () => {\n    var _a;\n\n    if (!table.refs.scrollBarRef) return;\n    (_a = table.refs.scrollBarRef.wrap$) == null ? void 0 : _a.addEventListener(\"scroll\", syncPostion, {\n      passive: true\n    });\n\n    if (props.fit) {\n      addResizeListener(table.vnode.el, resizeListener);\n    } else {\n      on(window, \"resize\", doLayout);\n    }\n  };\n\n  onBeforeUnmount(() => {\n    unbindEvents();\n  });\n\n  const unbindEvents = () => {\n    var _a;\n\n    (_a = table.refs.scrollBarRef.wrap$) == null ? void 0 : _a.removeEventListener(\"scroll\", syncPostion, true);\n\n    if (props.fit) {\n      removeResizeListener(table.vnode.el, resizeListener);\n    } else {\n      off(window, \"resize\", doLayout);\n    }\n  };\n\n  const resizeListener = () => {\n    if (!table.$ready) return;\n    let shouldUpdateLayout = false;\n    const el = table.vnode.el;\n    const {\n      width: oldWidth,\n      height: oldHeight\n    } = resizeState.value;\n    const width = tableWidth.value = el.offsetWidth;\n\n    if (oldWidth !== width) {\n      shouldUpdateLayout = true;\n    }\n\n    const height2 = el.offsetHeight;\n\n    if ((props.height || shouldUpdateHeight.value) && oldHeight !== height2) {\n      shouldUpdateLayout = true;\n    }\n\n    if (shouldUpdateLayout) {\n      resizeState.value = {\n        width,\n        height: height2\n      };\n      doLayout();\n    }\n  };\n\n  const tableSize = useSize();\n  const bodyWidth = computed(() => {\n    const {\n      bodyWidth: bodyWidth_,\n      scrollY,\n      gutterWidth\n    } = layout;\n    return bodyWidth_.value ? `${bodyWidth_.value - (scrollY.value ? gutterWidth : 0)}px` : \"\";\n  });\n  const tableLayout = computed(() => {\n    if (props.maxHeight) return \"fixed\";\n    return props.tableLayout;\n  });\n\n  function calcMaxHeight(maxHeight, footerHeight, headerHeight) {\n    const parsedMaxHeight = parseHeight(maxHeight);\n    const tableHeaderHeight = props.showHeader ? headerHeight : 0;\n    if (parsedMaxHeight === null) return;\n\n    if (isString(parsedMaxHeight)) {\n      return `calc(${parsedMaxHeight} - ${footerHeight}px - ${tableHeaderHeight}px)`;\n    }\n\n    return parsedMaxHeight - footerHeight - tableHeaderHeight;\n  }\n\n  const height = computed(() => {\n    const headerHeight = layout.headerHeight.value || 0;\n    const bodyHeight2 = layout.bodyHeight.value;\n    const footerHeight = layout.footerHeight.value || 0;\n\n    if (props.height) {\n      return bodyHeight2 ? bodyHeight2 : void 0;\n    } else if (props.maxHeight) {\n      return calcMaxHeight(props.maxHeight, footerHeight, headerHeight);\n    }\n\n    return void 0;\n  });\n  const bodyHeight = computed(() => {\n    const headerHeight = layout.headerHeight.value || 0;\n    const bodyHeight2 = layout.bodyHeight.value;\n    const footerHeight = layout.footerHeight.value || 0;\n\n    if (props.height) {\n      return {\n        height: bodyHeight2 ? `${bodyHeight2}px` : \"\"\n      };\n    } else if (props.maxHeight) {\n      const maxHeight = calcMaxHeight(props.maxHeight, footerHeight, headerHeight);\n\n      if (maxHeight !== null) {\n        return {\n          \"max-height\": `${maxHeight}${isNumber(maxHeight) ? \"px\" : \"\"}`\n        };\n      }\n    }\n\n    return {};\n  });\n  const emptyBlockStyle = computed(() => {\n    if (props.data && props.data.length) return null;\n    let height2 = \"100%\";\n\n    if (layout.appendHeight.value) {\n      height2 = `calc(100% - ${layout.appendHeight.value}px)`;\n    }\n\n    return {\n      width: tableWidth.value ? `${tableWidth.value}px` : \"\",\n      height: height2\n    };\n  });\n\n  const handleFixedMousewheel = (event, data) => {\n    const bodyWrapper = table.refs.bodyWrapper;\n\n    if (Math.abs(data.spinY) > 0) {\n      const currentScrollTop = bodyWrapper.scrollTop;\n\n      if (data.pixelY < 0 && currentScrollTop !== 0) {\n        event.preventDefault();\n      }\n\n      if (data.pixelY > 0 && bodyWrapper.scrollHeight - bodyWrapper.clientHeight > currentScrollTop) {\n        event.preventDefault();\n      }\n\n      bodyWrapper.scrollTop += Math.ceil(data.pixelY / 5);\n    } else {\n      bodyWrapper.scrollLeft += Math.ceil(data.pixelX / 5);\n    }\n  };\n\n  const fixedHeight = computed(() => {\n    if (props.maxHeight) {\n      if (props.showSummary) {\n        return {\n          bottom: 0\n        };\n      }\n\n      return {\n        bottom: layout.scrollX.value && props.data.length ? `${layout.gutterWidth}px` : \"\"\n      };\n    } else {\n      if (props.showSummary) {\n        return {\n          height: layout.tableHeight.value ? `${layout.tableHeight.value}px` : \"\"\n        };\n      }\n\n      return {\n        height: layout.viewportHeight.value ? `${layout.viewportHeight.value}px` : \"\"\n      };\n    }\n  });\n  const fixedBodyHeight = computed(() => {\n    if (props.height) {\n      return {\n        height: layout.fixedBodyHeight.value ? `${layout.fixedBodyHeight.value}px` : \"\"\n      };\n    } else if (props.maxHeight) {\n      let maxHeight = parseHeight(props.maxHeight);\n\n      if (typeof maxHeight === \"number\") {\n        maxHeight = layout.scrollX.value ? maxHeight - layout.gutterWidth : maxHeight;\n\n        if (props.showHeader) {\n          maxHeight -= layout.headerHeight.value;\n        }\n\n        maxHeight -= layout.footerHeight.value;\n        return {\n          \"max-height\": `${maxHeight}px`\n        };\n      }\n    }\n\n    return {};\n  });\n  return {\n    isHidden,\n    renderExpanded,\n    setDragVisible,\n    isGroup,\n    handleMouseLeave,\n    handleHeaderFooterMousewheel,\n    tableSize,\n    bodyHeight,\n    height,\n    emptyBlockStyle,\n    handleFixedMousewheel,\n    fixedHeight,\n    fixedBodyHeight,\n    resizeProxyVisible,\n    bodyWidth,\n    resizeState,\n    doLayout,\n    tableBodyStyles,\n    tableLayout,\n    scrollbarViewStyle\n  };\n}\n\nexport { useStyle as default };","map":{"version":3,"mappings":"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","names":["useStyle","props","layout","store","table","isHidden","ref","renderExpanded","resizeProxyVisible","setDragVisible","visible","value","resizeState","width","height","isGroup","scrollbarViewStyle","display","verticalAlign","tableWidth","watchEffect","setHeight","setMaxHeight","maxHeight","watch","currentRowKey","states","rowKey","unref","setCurrentRowKey","immediate","data","commit","deep","expandRowKeys","setExpandRowKeysAdapter","handleMouseLeave","hoverState","handleHeaderFooterMousewheel","event","pixelX","pixelY","Math","abs","refs","bodyWrapper","scrollLeft","shouldUpdateHeight","computed","fixedColumns","length","rightFixedColumns","tableBodyStyles","bodyWidth","doLayout","updateElsHeight","updateColumnsWidth","requestAnimationFrame","syncPostion","onMounted","nextTick","updateColumns","bindEvents","el","vnode","flexible","parentElement","style","minWidth","offsetWidth","offsetHeight","columns","forEach","column","filteredValue","values","silent","$ready","setScrollClassByEl","className","classList","Array","from","filter","item","startsWith","push","scrollX","join","setScrollClass","tableWrapper","hasScrollClass","contains","scrollBarRef","scrollingNoneClass","scrollContainer","wrap$","scrollWidth","headerWrapper","footerWrapper","maxScrollLeftPosition","_a","addEventListener","passive","fit","addResizeListener","resizeListener","on","window","onBeforeUnmount","unbindEvents","removeEventListener","removeResizeListener","off","shouldUpdateLayout","oldWidth","oldHeight","height2","tableSize","useSize","bodyWidth_","scrollY","gutterWidth","tableLayout","calcMaxHeight","footerHeight","headerHeight","parsedMaxHeight","parseHeight","tableHeaderHeight","showHeader","isString","bodyHeight2","bodyHeight","isNumber","emptyBlockStyle","appendHeight","handleFixedMousewheel","spinY","currentScrollTop","scrollTop","preventDefault","scrollHeight","clientHeight","ceil","fixedHeight","showSummary","bottom","tableHeight","viewportHeight","fixedBodyHeight"],"sources":["../../../../../../../packages/components/table/src/table/style-helper.ts"],"sourcesContent":["import {\n  computed,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  ref,\n  unref,\n  watch,\n  watchEffect,\n} from 'vue'\nimport {\n  addResizeListener,\n  isNumber,\n  isString,\n  off,\n  on,\n  removeResizeListener,\n} from '@element-plus/utils'\nimport { useSize } from '@element-plus/hooks'\nimport { parseHeight } from '../util'\n\nimport type { ResizableElement } from '@element-plus/utils'\nimport type { Table, TableProps } from './defaults'\nimport type { Store } from '../store'\nimport type TableLayout from '../table-layout'\nimport type { TableColumnCtx } from '../table-column/defaults'\n\nfunction useStyle<T>(\n  props: TableProps<T>,\n  layout: TableLayout<T>,\n  store: Store<T>,\n  table: Table<T>\n) {\n  const isHidden = ref(false)\n  const renderExpanded = ref(null)\n  const resizeProxyVisible = ref(false)\n  const setDragVisible = (visible: boolean) => {\n    resizeProxyVisible.value = visible\n  }\n  const resizeState = ref<{\n    width: null | number\n    height: null | number\n  }>({\n    width: null,\n    height: null,\n  })\n  const isGroup = ref(false)\n  const scrollbarViewStyle = {\n    display: 'inline-block',\n    verticalAlign: 'middle',\n  }\n  const tableWidth = ref()\n\n  watchEffect(() => {\n    layout.setHeight(props.height)\n  })\n  watchEffect(() => {\n    layout.setMaxHeight(props.maxHeight)\n  })\n  watch(\n    () => [props.currentRowKey, store.states.rowKey],\n    ([currentRowKey, rowKey]) => {\n      if (!unref(rowKey)) return\n      store.setCurrentRowKey(`${currentRowKey}`)\n    },\n    {\n      immediate: true,\n    }\n  )\n  watch(\n    () => props.data,\n    (data) => {\n      table.store.commit('setData', data)\n    },\n    {\n      immediate: true,\n      deep: true,\n    }\n  )\n  watchEffect(() => {\n    if (props.expandRowKeys) {\n      store.setExpandRowKeysAdapter(props.expandRowKeys)\n    }\n  })\n\n  const handleMouseLeave = () => {\n    table.store.commit('setHoverRow', null)\n    if (table.hoverState) table.hoverState = null\n  }\n\n  const handleHeaderFooterMousewheel = (event, data) => {\n    const { pixelX, pixelY } = data\n    if (Math.abs(pixelX) >= Math.abs(pixelY)) {\n      table.refs.bodyWrapper.scrollLeft += data.pixelX / 5\n    }\n  }\n\n  const shouldUpdateHeight = computed(() => {\n    return (\n      props.height ||\n      props.maxHeight ||\n      store.states.fixedColumns.value.length > 0 ||\n      store.states.rightFixedColumns.value.length > 0\n    )\n  })\n\n  const tableBodyStyles = computed(() => {\n    return {\n      width: layout.bodyWidth.value ? `${layout.bodyWidth.value}px` : '',\n    }\n  })\n\n  const doLayout = () => {\n    if (shouldUpdateHeight.value) {\n      layout.updateElsHeight()\n    }\n    layout.updateColumnsWidth()\n    requestAnimationFrame(syncPostion)\n  }\n  onMounted(async () => {\n    await nextTick()\n    store.updateColumns()\n    bindEvents()\n    requestAnimationFrame(doLayout)\n\n    const el: HTMLElement = table.vnode.el as HTMLElement\n    if (props.flexible && el && el.parentElement) {\n      // Automatic minimum size of flex-items\n      // Ensure that the main axis does not follow the width of the items\n      el.parentElement.style.minWidth = '0'\n    }\n\n    resizeState.value = {\n      width: (tableWidth.value = el.offsetWidth),\n      height: el.offsetHeight,\n    }\n\n    // init filters\n    store.states.columns.value.forEach((column: TableColumnCtx<T>) => {\n      if (column.filteredValue && column.filteredValue.length) {\n        table.store.commit('filterChange', {\n          column,\n          values: column.filteredValue,\n          silent: true,\n        })\n      }\n    })\n    table.$ready = true\n  })\n  const setScrollClassByEl = (el: HTMLElement, className: string) => {\n    if (!el) return\n    const classList = Array.from(el.classList).filter(\n      (item) => !item.startsWith('is-scrolling-')\n    )\n    classList.push(layout.scrollX.value ? className : 'is-scrolling-none')\n    el.className = classList.join(' ')\n  }\n  const setScrollClass = (className: string) => {\n    const { tableWrapper } = table.refs\n    setScrollClassByEl(tableWrapper, className)\n  }\n  const hasScrollClass = (className: string) => {\n    const { tableWrapper } = table.refs\n    return !!(tableWrapper && tableWrapper.classList.contains(className))\n  }\n  const syncPostion = function () {\n    if (!table.refs.scrollBarRef) return\n    if (!layout.scrollX.value) {\n      const scrollingNoneClass = 'is-scrolling-none'\n      if (!hasScrollClass(scrollingNoneClass)) {\n        setScrollClass(scrollingNoneClass)\n      }\n      return\n    }\n    const scrollContainer = table.refs.scrollBarRef.wrap$\n    if (!scrollContainer) return\n    const { scrollLeft, offsetWidth, scrollWidth } = scrollContainer\n    const { headerWrapper, footerWrapper } = table.refs\n    if (headerWrapper) headerWrapper.scrollLeft = scrollLeft\n    if (footerWrapper) footerWrapper.scrollLeft = scrollLeft\n    const maxScrollLeftPosition = scrollWidth - offsetWidth - 1\n    if (scrollLeft >= maxScrollLeftPosition) {\n      setScrollClass('is-scrolling-right')\n    } else if (scrollLeft === 0) {\n      setScrollClass('is-scrolling-left')\n    } else {\n      setScrollClass('is-scrolling-middle')\n    }\n  }\n\n  const bindEvents = () => {\n    if (!table.refs.scrollBarRef) return\n    table.refs.scrollBarRef.wrap$?.addEventListener('scroll', syncPostion, {\n      passive: true,\n    })\n    if (props.fit) {\n      addResizeListener(table.vnode.el as ResizableElement, resizeListener)\n    } else {\n      on(window, 'resize', doLayout)\n    }\n  }\n  onBeforeUnmount(() => {\n    unbindEvents()\n  })\n  const unbindEvents = () => {\n    table.refs.scrollBarRef.wrap$?.removeEventListener(\n      'scroll',\n      syncPostion,\n      true\n    )\n    if (props.fit) {\n      removeResizeListener(table.vnode.el as ResizableElement, resizeListener)\n    } else {\n      off(window, 'resize', doLayout)\n    }\n  }\n  const resizeListener = () => {\n    if (!table.$ready) return\n    let shouldUpdateLayout = false\n    const el = table.vnode.el\n    const { width: oldWidth, height: oldHeight } = resizeState.value\n\n    const width = (tableWidth.value = el.offsetWidth)\n    if (oldWidth !== width) {\n      shouldUpdateLayout = true\n    }\n\n    const height = el.offsetHeight\n    if ((props.height || shouldUpdateHeight.value) && oldHeight !== height) {\n      shouldUpdateLayout = true\n    }\n\n    if (shouldUpdateLayout) {\n      resizeState.value = {\n        width,\n        height,\n      }\n      doLayout()\n    }\n  }\n  const tableSize = useSize()\n  const bodyWidth = computed(() => {\n    const { bodyWidth: bodyWidth_, scrollY, gutterWidth } = layout\n    return bodyWidth_.value\n      ? `${(bodyWidth_.value as number) - (scrollY.value ? gutterWidth : 0)}px`\n      : ''\n  })\n\n  const tableLayout = computed(() => {\n    if (props.maxHeight) return 'fixed'\n    return props.tableLayout\n  })\n\n  function calcMaxHeight(\n    maxHeight: string | number,\n    footerHeight: number,\n    headerHeight: number\n  ) {\n    const parsedMaxHeight = parseHeight(maxHeight)\n    const tableHeaderHeight = props.showHeader ? headerHeight : 0\n    if (parsedMaxHeight === null) return\n    if (isString(parsedMaxHeight)) {\n      return `calc(${parsedMaxHeight} - ${footerHeight}px - ${tableHeaderHeight}px)`\n    }\n    return parsedMaxHeight - footerHeight - tableHeaderHeight\n  }\n\n  const height = computed(() => {\n    const headerHeight = layout.headerHeight.value || 0\n    const bodyHeight = layout.bodyHeight.value\n    const footerHeight = layout.footerHeight.value || 0\n    if (props.height) {\n      return bodyHeight ? bodyHeight : undefined\n    } else if (props.maxHeight) {\n      return calcMaxHeight(props.maxHeight, footerHeight, headerHeight)\n    }\n    return undefined\n  })\n\n  const bodyHeight = computed(() => {\n    const headerHeight = layout.headerHeight.value || 0\n    const bodyHeight = layout.bodyHeight.value\n    const footerHeight = layout.footerHeight.value || 0\n    if (props.height) {\n      return {\n        height: bodyHeight ? `${bodyHeight}px` : '',\n      }\n    } else if (props.maxHeight) {\n      const maxHeight = calcMaxHeight(\n        props.maxHeight,\n        footerHeight,\n        headerHeight\n      )\n      if (maxHeight !== null) {\n        return {\n          'max-height': `${maxHeight}${isNumber(maxHeight) ? 'px' : ''}`,\n        }\n      }\n    }\n    return {}\n  })\n  const emptyBlockStyle = computed(() => {\n    if (props.data && props.data.length) return null\n    let height = '100%'\n    if (layout.appendHeight.value) {\n      height = `calc(100% - ${layout.appendHeight.value}px)`\n    }\n    return {\n      width: tableWidth.value ? `${tableWidth.value}px` : '',\n      height,\n    }\n  })\n  /**\n   * fix layout\n   */\n  const handleFixedMousewheel = (event, data) => {\n    const bodyWrapper = table.refs.bodyWrapper\n    if (Math.abs(data.spinY) > 0) {\n      const currentScrollTop = bodyWrapper.scrollTop\n      if (data.pixelY < 0 && currentScrollTop !== 0) {\n        event.preventDefault()\n      }\n      if (\n        data.pixelY > 0 &&\n        bodyWrapper.scrollHeight - bodyWrapper.clientHeight > currentScrollTop\n      ) {\n        event.preventDefault()\n      }\n      bodyWrapper.scrollTop += Math.ceil(data.pixelY / 5)\n    } else {\n      bodyWrapper.scrollLeft += Math.ceil(data.pixelX / 5)\n    }\n  }\n  const fixedHeight = computed(() => {\n    if (props.maxHeight) {\n      if (props.showSummary) {\n        return {\n          bottom: 0,\n        }\n      }\n      return {\n        bottom:\n          layout.scrollX.value && props.data.length\n            ? `${layout.gutterWidth}px`\n            : '',\n      }\n    } else {\n      if (props.showSummary) {\n        return {\n          height: layout.tableHeight.value\n            ? `${layout.tableHeight.value}px`\n            : '',\n        }\n      }\n      return {\n        height: layout.viewportHeight.value\n          ? `${layout.viewportHeight.value}px`\n          : '',\n      }\n    }\n  })\n  const fixedBodyHeight = computed(() => {\n    if (props.height) {\n      return {\n        height: layout.fixedBodyHeight.value\n          ? `${layout.fixedBodyHeight.value}px`\n          : '',\n      }\n    } else if (props.maxHeight) {\n      let maxHeight = parseHeight(props.maxHeight)\n      if (typeof maxHeight === 'number') {\n        maxHeight = layout.scrollX.value\n          ? maxHeight - layout.gutterWidth\n          : maxHeight\n        if (props.showHeader) {\n          maxHeight -= layout.headerHeight.value\n        }\n        maxHeight -= layout.footerHeight.value\n        return {\n          'max-height': `${maxHeight}px`,\n        }\n      }\n    }\n    return {}\n  })\n\n  return {\n    isHidden,\n    renderExpanded,\n    setDragVisible,\n    isGroup,\n    handleMouseLeave,\n    handleHeaderFooterMousewheel,\n    tableSize,\n    bodyHeight,\n    height,\n    emptyBlockStyle,\n    handleFixedMousewheel,\n    fixedHeight,\n    fixedBodyHeight,\n    resizeProxyVisible,\n    bodyWidth,\n    resizeState,\n    doLayout,\n    tableBodyStyles,\n    tableLayout,\n    scrollbarViewStyle,\n  }\n}\n\nexport default useStyle\n"]},"metadata":{},"sourceType":"module"}