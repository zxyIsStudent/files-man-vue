{"ast":null,"code":"var e,\n    t = [\"scroll\", \"wheel\", \"touchstart\", \"touchmove\", \"touchenter\", \"touchend\", \"touchleave\", \"mouseout\", \"mouseleave\", \"mouseup\", \"mousedown\", \"mousemove\", \"mouseenter\", \"mousewheel\", \"mouseover\"];\n\nif (function () {\n  var e = !1;\n\n  try {\n    var t = Object.defineProperty({}, \"passive\", {\n      get: function () {\n        e = !0;\n      }\n    });\n    window.addEventListener(\"test\", null, t), window.removeEventListener(\"test\", null, t);\n  } catch (e) {}\n\n  return e;\n}()) {\n  var o = EventTarget.prototype.addEventListener;\n  e = o, EventTarget.prototype.addEventListener = function (o, r, n) {\n    var s,\n        a = \"object\" == typeof n && null !== n,\n        i = a ? n.capture : n;\n    (n = a ? function (e) {\n      var t = Object.getOwnPropertyDescriptor(e, \"passive\");\n      return t && !0 !== t.writable && void 0 === t.set ? Object.assign({}, e) : e;\n    }(n) : {}).passive = void 0 !== (s = n.passive) ? s : -1 !== t.indexOf(o) && !0, n.capture = void 0 !== i && i, e.call(this, o, r, n);\n  }, EventTarget.prototype.addEventListener._original = e;\n}","map":{"version":3,"mappings":"IAyB2BA;IAnBrBC,IAAwB,CAC5B,QAD4B,EAClB,OADkB,EAE5B,YAF4B,EAEd,WAFc,EAED,YAFC,EAEa,UAFb,EAEyB,YAFzB,EAG5B,UAH4B,EAGhB,YAHgB,EAGF,SAHE,EAGS,WAHT,EAGsB,WAHtB,EAGmC,YAHnC,EAGiD,YAHjD,EAG+D,WAH/D;;AAoC9B,IC1C6C;EAC3C,IAAIC,KAAY,CAAhB;;EAEA;IACE,IAAMC,IAAOC,OAAOC,cAAPD,CAAsB,EAAtBA,EAA0B,SAA1BA,EAAqC;MAChDE;QACEJ,KAAY,CAAZA;MAAY;IAFkC,CAArCE,CAAb;IAMAG,OAAOC,gBAAPD,CAAwB,MAAxBA,EAAgC,IAAhCA,EAAsCJ,CAAtCI,GACAA,OAAOE,mBAAPF,CAA2B,MAA3BA,EAAmC,IAAnCA,EAAyCJ,CAAzCI,CADAA;EAEA,CATF,CASE,OAAOG,CAAP,EAAOA,CAET;;EAAA,OAAOR,CAAP;AD0BsBS,CCxCqB,ED0C7C,EAAqB;EACnB,IAAMC,IAAWC,YAAYC,SAAZD,CAAsBL,gBAAvC;EAlByBR,IAmBPY,CAnBOZ,EACzBa,YAAYC,SAAZD,CAAsBL,gBAAtBK,GAAyC,UAAUE,CAAV,EAAgBC,CAAhB,EAA0BC,CAA1B,EAA0BA;IACjE,IAhB6BC,CAgB7B;IAAA,IAAMC,IAAyC,mBAAZF,CAAY,IAAwB,SAAZA,CAA3D;IAAA,IACMG,IAAsBD,IAAsBF,EAAQI,OAA9BF,GAAwCF,CADpE;IACoEA,CAEpEA,IAAkBE,IAbK,UAACF,CAAD,EAACA;MAC1B,IAAMK,IAAoBlB,OAAOmB,wBAAPnB,CAAgCa,CAAhCb,EAAyC,SAAzCA,CAA1B;MAEA,OAAOkB,MAAoD,CAApDA,KAAqBA,EAAkBE,QAAvCF,IAAuCE,KAA+CC,CAA/CD,KAAqBF,EAAkBI,GAA9EJ,GACHlB,OAAOuB,MAAPvB,CAAc,EAAdA,EAAkBa,CAAlBb,CADGkB,GAEHL,CAFJ;IAU0CW,CAbjB,CAaoCX,CAbpC,CAaLE,GAAoD,EAFFF,EAG5DC,OAH4DD,GAG5DC,KAnBMO,CAmBNP,MApBqBA,IAoBaD,EAAQC,OAA1CA,IAnBwBA,CAmBxBA,GAnBwBA,CAEmB,CAFnBA,KAE3BjB,EAAsB4B,OAAtB5B,CAiBsDc,CAjBtDd,CAF2BiB,IAmB2BH,CA5BpD,CAyB6DE,EAIpEA,EAAQI,OAARJ,GAAQI,KAAyBI,CAAzBJ,KAAUD,CAAVC,IAA8DD,CAJFH,EAMpEjB,EAAY8B,IAAZ9B,CAAiB+B,IAAjB/B,EAAuBe,CAAvBf,EAA6BgB,CAA7BhB,EAAuCiB,CAAvCjB,CANoEiB;EAM7BA,CAThBjB,EAYzBa,YAAYC,SAAZD,CAAsBL,gBAAtBK,CAAuCmB,SAAvCnB,GAAmDb,CAZ1BA;AAY0BA","names":["superMethod","supportedPassiveTypes","supported","opts","Object","defineProperty","get","window","addEventListener","removeEventListener","e","eventListenerOptionsSupported","addEvent","EventTarget","prototype","type","listener","options","passive","usesListenerOptions","useCapture","capture","passiveDescriptor","getOwnPropertyDescriptor","writable","undefined","set","assign","getWritableOptions","indexOf","call","this","_original"],"sources":["../src/index.js","../src/utils.js"],"sourcesContent":["import { eventListenerOptionsSupported } from './utils';\n\nconst defaultOptions = {\n  passive: true,\n  capture: false\n};\nconst supportedPassiveTypes = [\n  'scroll', 'wheel',\n  'touchstart', 'touchmove', 'touchenter', 'touchend', 'touchleave',\n  'mouseout', 'mouseleave', 'mouseup', 'mousedown', 'mousemove', 'mouseenter', 'mousewheel', 'mouseover'\n];\nconst getDefaultPassiveOption = (passive, eventName) => {\n  if (passive !== undefined) return passive;\n\n  return supportedPassiveTypes.indexOf(eventName) === -1 ? false : defaultOptions.passive;\n};\n\nconst getWritableOptions = (options) => {\n  const passiveDescriptor = Object.getOwnPropertyDescriptor(options, 'passive');\n    \n  return passiveDescriptor && passiveDescriptor.writable !== true && passiveDescriptor.set === undefined\n    ? Object.assign({}, options)\n    : options;\n};\n\nconst overwriteAddEvent = (superMethod) => {\n  EventTarget.prototype.addEventListener = function (type, listener, options) {\n    const usesListenerOptions = typeof options === 'object' && options !== null;\n    const useCapture          = usesListenerOptions ? options.capture : options;\n\n    options         = usesListenerOptions ? getWritableOptions(options) : {};\n    options.passive = getDefaultPassiveOption(options.passive, type);\n    options.capture = useCapture === undefined ? defaultOptions.capture : useCapture;\n\n    superMethod.call(this, type, listener, options);\n  };\n\n  EventTarget.prototype.addEventListener._original = superMethod;\n};\n\nconst supportsPassive = eventListenerOptionsSupported();\n\nif (supportsPassive) {\n  const addEvent = EventTarget.prototype.addEventListener;\n  overwriteAddEvent(addEvent);\n}\n","export const eventListenerOptionsSupported = () => {\n  let supported = false;\n\n  try {\n    const opts = Object.defineProperty({}, 'passive', {\n      get() {\n        supported = true;\n      }\n    });\n\n    window.addEventListener('test', null, opts);\n    window.removeEventListener('test', null, opts);\n  } catch (e) {}\n\n  return supported;\n}\n"]},"metadata":{},"sourceType":"script"}