{"ast":null,"code":"import { useRouter } from 'vue-router';\nimport Storage from \"../../utils/DeviceStorage\";\nimport Message from '../../utils/Message';\nimport { reactive } from 'vue';\nimport { getImgPages } from '../../utils/Api';\nimport { uploads } from '../../utils/Api';\n;\nimport { onMounted } from 'vue';\nexport default {\n  name: \"login\",\n\n  setup() {\n    const userForm = reactive({\n      form: {\n        pageNum: 1,\n        pageSize: 10\n      },\n      collectPath: '/Users/zhaoxiangyuan/Downloads',\n      total: 0,\n      imgList: [],\n      imgData: [{\n        \"fileId\": 6,\n        \"filePath\": \"/Users/zhaoxiangyuan/Documents/378E28A8-69C8-493C-A1B3-511DC48897BA-1669190063504.jpg\",\n        \"fileName\": \"378E28A8-69C8-493C-A1B3-511DC48897BA-1669190063504.jpg\",\n        \"fileMd5\": \"64c123bb7edfa06fe353f0be466604c9\",\n        \"cteTime\": null,\n        \"imgUrl\": null\n      }]\n    });\n\n    const getPage = () => {\n      getImgPages(userForm.form).then(ref => {\n        userForm.imgData = ref.records;\n        userForm.total = ref.total;\n        userForm.form.pageNum = ref.current;\n        userForm.form.pageSize = ref.size;\n      });\n    };\n\n    onMounted(() => {\n      getPage();\n    });\n\n    const getPageNum = num => {\n      userForm.form.pageNum = num;\n      getPage();\n    };\n\n    const getPageSize = size => {\n      userForm.form.pageSize = size;\n      getPage();\n    };\n\n    const SrcList = img => {\n      return img;\n    };\n\n    const handleAvatarSuccess = () => {\n      console.log(\"onSuccessonSuccess======》\");\n      userForm.form.pageNum = 1;\n    };\n\n    const beforeAvatarUpload = file => {\n      const isJPG = file.type === \"image/jpeg\" || file.type === \"image/png\"; // const isLt2M = file.size / 1024 / 1024 < 2;\n      // if (!isJPG) {\n      //   Message.error(\"上传图片只能是 JPG、PNG 格式!\");\n      //   return false;\n      // }\n      // if (!isLt2M) {\n      //   Message.error(\"上传图片大小不能超过 2MB!\");\n      //   return false;\n      // }\n\n      let formData = new FormData();\n      formData.append(\"file\", file);\n      uploads(formData);\n      console.log(\"上传完成======》\" + file);\n    };\n\n    const handleOpenMenu = () => {\n      const file = document.getElementById('file');\n      file.click();\n    };\n\n    const fileChange = e => {\n      try {\n        const fu = document.getElementById('file');\n        if (fu === null) return; // 只有electro可以获取到文件夹路径\n\n        this.form.collectPath = fu.files[0].path.replaceAll('\\\\', '/');\n      } catch (error) {\n        console.debug('choice file err:', error);\n      }\n    };\n\n    return {\n      SrcList,\n      userForm,\n      getPageSize,\n      getPageNum,\n      beforeAvatarUpload,\n      handleAvatarSuccess,\n      handleOpenMenu,\n      fileChange\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["useRouter","Storage","Message","reactive","getImgPages","uploads","onMounted","name","setup","userForm","form","pageNum","pageSize","collectPath","total","imgList","imgData","getPage","then","ref","records","current","size","getPageNum","num","getPageSize","SrcList","img","handleAvatarSuccess","console","log","beforeAvatarUpload","file","isJPG","type","formData","FormData","append","handleOpenMenu","document","getElementById","click","fileChange","e","fu","files","path","replaceAll","error","debug"],"sourceRoot":"","sources":["/Users/zhaoxiangyuan/Downloads/归档/src/views/Login/login.vue"],"sourcesContent":["<template>\n  <div class=\"header\">\n    <div class=\"padding\">\n\n\n      <el-upload\n          class=\"upload-demo\"\n          multiple\n          :limit=\"3000\"\n          :file-list=\"userForm.imgList\"\n          :before-upload=\"beforeAvatarUpload\"\n          :osubmit=\"handleAvatarSuccess\"\n          :show-file-list=\"true\"\n          :auto-upload=\"true\"\n          action=\"\"\n        >\n          <el-button size=\"small\" type=\"primary\">上传图片</el-button>\n        </el-upload>\n       <div class=\"imgList\">\n         <div  v-for=\"(item,index) in userForm.imgData\" :key=\"index\">\n          <el-image :src=\"item.imgUrl\" alt=\"\" style=\"width:100px;height: 100px;margin-left: 20px;\"\n                :preview-src-list=\"SrcList(item.img)\" :preview-teleported=\"true\" :infinite=\"false\"/>\n            \n         </div>\n       </div>\n       \n       <div class=\"pagination\">\n    <el-pagination background layout=\"total, sizes,prev, pager, next\"\n                  :page-sizes=\"[10, 50, 100]\" :total=\"userForm.total\"\n                  :current-page=\"userForm.form.pageNum\" :page-size=\"userForm.form.pageSize\"\n                  @current-change=\"getPageNum\"\n                  @size-change=\"getPageSize\" />\n  </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router';\nimport Storage from \"../../utils/DeviceStorage\";\nimport Message from '../../utils/Message';\nimport {reactive} from 'vue'\nimport { getImgPages } from '../../utils/Api';\nimport { uploads } from '../../utils/Api';;\nimport {onMounted} from 'vue'\n\nexport default {\n  name: \"login\",\n  \n setup () {\n   const userForm = reactive ({\n    form:{\n      pageNum: 1,\n      pageSize: 10,\n    },\n    collectPath:'/Users/zhaoxiangyuan/Downloads',\n    total: 0,\n    imgList:[],\n    imgData:[\n      {\"fileId\": 6,\n      \"filePath\": \"/Users/zhaoxiangyuan/Documents/378E28A8-69C8-493C-A1B3-511DC48897BA-1669190063504.jpg\",\n      \"fileName\": \"378E28A8-69C8-493C-A1B3-511DC48897BA-1669190063504.jpg\",\n      \"fileMd5\": \"64c123bb7edfa06fe353f0be466604c9\",\n      \"cteTime\": null,\n      \"imgUrl\": null,\n    },\n\n    ]\n   })\n\n   const getPage=()=>{\n \n    getImgPages(userForm.form).then((ref)=>{\n        userForm.imgData=ref.records;\n        userForm.total=ref.total\n        userForm.form.pageNum=ref.current\n        userForm.form.pageSize=ref.size\n    })\n   }\n   onMounted(()=>{\n\n     getPage()\n   \n   })\n   const getPageNum = (num) => {\n    userForm.form.pageNum=num;\n     getPage()\n   }\n\n   const  getPageSize = (size) => {\n     userForm.form.pageSize=size;\n     getPage()\n   }\n\n   const SrcList = (img) =>{\n    return img\n   }\n\n   const handleAvatarSuccess = ()=>{\n    console.log(\"onSuccessonSuccess======》\")\n     userForm.form.pageNum=1;\n     \n   }\n   const beforeAvatarUpload = (file) => {\n    const isJPG = file.type === \"image/jpeg\" || file.type === \"image/png\";\n      // const isLt2M = file.size / 1024 / 1024 < 2;\n      // if (!isJPG) {\n      //   Message.error(\"上传图片只能是 JPG、PNG 格式!\");\n      //   return false;\n      // }\n      // if (!isLt2M) {\n      //   Message.error(\"上传图片大小不能超过 2MB!\");\n      //   return false;\n      // }\n       let formData = new FormData();\n       formData.append(\"file\", file);\n\n       uploads(formData);\n\n      console.log(\"上传完成======》\"+file)\n   }\n\n\n   const handleOpenMenu = () => {\n\t      const file = document.getElementById('file')\n\t      file.click()\n\t    }\n      const  fileChange= (e) => {\n\t      try {\n\t        const fu = document.getElementById('file')\n\t        if (fu === null) return\n\t        // 只有electro可以获取到文件夹路径\n\t        this.form.collectPath = fu.files[0].path.replaceAll('\\\\', '/')\n\t      } catch (error) {\n\t        console.debug('choice file err:', error)\n\t      }\n\t    }\n\n   return {\n      SrcList,\n      userForm,\n      getPageSize,\n      getPageNum,\n      beforeAvatarUpload,\n      handleAvatarSuccess,\n      handleOpenMenu,fileChange\n   }\n },\n};\n</script>\n\n<style scoped>\n.padding{\n  padding: 20px;\n}\n.pagination {\n        width: 100%;\n        display: flex;\n        justify-content: right;\n        margin-top: 30px;\n    }\n.imgList{\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n}\n</style>\n\n"]},"metadata":{},"sourceType":"module"}