{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-724a6f79\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"header\"\n};\nconst _hoisted_2 = {\n  class: \"padding\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"上传图片\");\n\nconst _hoisted_4 = {\n  class: \"imgList\"\n};\nconst _hoisted_5 = {\n  class: \"pagination\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n\n  const _component_el_image = _resolveComponent(\"el-image\");\n\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_upload, {\n    class: \"upload-demo\",\n    multiple: \"\",\n    limit: 3000,\n    \"file-list\": $setup.userForm.imgList,\n    \"before-upload\": $setup.beforeAvatarUpload,\n    osubmit: $setup.handleAvatarSuccess,\n    \"show-file-list\": true,\n    \"auto-upload\": true,\n    action: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_button, {\n      size: \"small\",\n      type: \"primary\"\n    }, {\n      default: _withCtx(() => [_hoisted_3]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"file-list\", \"before-upload\", \"osubmit\"]), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.userForm.imgData, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index\n    }, [_createVNode(_component_el_image, {\n      src: item.imgUrl,\n      alt: \"\",\n      style: {\n        \"width\": \"100px\",\n        \"height\": \"100px\",\n        \"margin-left\": \"20px\"\n      },\n      \"preview-src-list\": $setup.SrcList(item.img),\n      \"preview-teleported\": true,\n      infinite: false\n    }, null, 8\n    /* PROPS */\n    , [\"src\", \"preview-src-list\"])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_pagination, {\n    background: \"\",\n    layout: \"total, sizes,prev, pager, next\",\n    \"page-sizes\": [10, 50, 100],\n    total: $setup.userForm.total,\n    \"current-page\": $setup.userForm.form.pageNum,\n    \"page-size\": $setup.userForm.form.pageSize,\n    onCurrentChange: $setup.getPageNum,\n    onSizeChange: $setup.getPageSize\n  }, null, 8\n  /* PROPS */\n  , [\"total\", \"current-page\", \"page-size\", \"onCurrentChange\", \"onSizeChange\"])])])]);\n}","map":{"version":3,"mappings":";;;;;EACOA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;iDAckC;;;EAErCA,KAAK,EAAC;;;EAQNA,KAAK,EAAC;;;;;;;;;;;uBAzBhBC,oBAiCM,KAjCN,cAiCM,CAhCJC,oBA+BM,KA/BN,cA+BM,CA5BJC,aAYcC,oBAZd,EAYc;IAXVJ,KAAK,EAAC,aAWI;IAVVK,QAAQ,EAAR,EAUU;IATTC,KAAK,EAAE,IASE;IART,aAAWC,gBAASC,OAQX;IAPT,iBAAeD,yBAON;IANTE,OAAO,EAAEF,0BAMA;IALT,kBAAgB,IAKP;IAJT,eAAa,IAIJ;IAHVG,MAAM,EAAC;EAGG,CAZd;sBAWI,MAAuD,CAAvDP,aAAuDQ,oBAAvD,EAAuD;MAA5CC,IAAI,EAAC,OAAuC;MAA/BC,IAAI,EAAC;IAA0B,CAAvD;wBAAuC,MAAI;;;;KAA3C,CAAuD;;;;GAX3D;;EAAA,4CA4BI,EAfHX,oBAMM,KANN,cAMM,oBALJD,oBAIMa,SAJN,EAIM,IAJN,EAIMC,YAJuBR,gBAASS,OAIhC,EAJuC,CAA/BC,IAA+B,EAA1BC,KAA0B,KAArB;yBAAxBjB,oBAIM,KAJN,EAIM;MAJ0CkB,GAAG,EAAED;IAI/C,CAJN,EAA0D,CACzDf,aAC0FiB,mBAD1F,EAC0F;MAD/EC,GAAG,EAAEJ,IAAI,CAACK,MACqE;MAD7DC,GAAG,EAAC,EACyD;MADtDC,KAAoD,EAApD;QAAA;QAAA;QAAA;MAAA,CACsD;MAAnF,oBAAkBjB,eAAQU,IAAI,CAACQ,GAAb,CAAiE;MAA7C,sBAAoB,IAAyB;MAAlBC,QAAQ,EAAE;IAAQ,CAD1F;;IAAA,8BADyD,CAA1D;GAIM,CAJN;;EAAA,CAKI,EANN,CAeG,EAPHxB,oBAMC,KAND,cAMC,CALJC,aAI2CwB,wBAJ3C,EAI2C;IAJ5BC,UAAU,EAAV,EAI4B;IAJjBC,MAAM,EAAC,gCAIU;IAH5B,cAAY,aAGgB;IAHAC,KAAK,EAAEvB,gBAASuB,KAGhB;IAF5B,gBAAcvB,gBAASwB,IAAT,CAAcC,OAEA;IAFU,aAAWzB,gBAASwB,IAAT,CAAcE,QAEnC;IAD5BC,eAAc,EAAE3B,iBACY;IAA5B4B,YAAW,EAAE5B;EAAe,CAJ3C;;EAAA,4EAKI,CAND,CAOG,CA/BN,CAgCI,CAjCN","names":["class","_createElementBlock","_createElementVNode","_createVNode","_component_el_upload","multiple","limit","$setup","imgList","osubmit","action","_component_el_button","size","type","_Fragment","_renderList","imgData","item","index","key","_component_el_image","src","imgUrl","alt","style","img","infinite","_component_el_pagination","background","layout","total","form","pageNum","pageSize","onCurrentChange","onSizeChange"],"sourceRoot":"","sources":["/Users/zhaoxiangyuan/Downloads/归档/src/views/Login/login.vue"],"sourcesContent":["<template>\n  <div class=\"header\">\n    <div class=\"padding\">\n\n\n      <el-upload\n          class=\"upload-demo\"\n          multiple\n          :limit=\"3000\"\n          :file-list=\"userForm.imgList\"\n          :before-upload=\"beforeAvatarUpload\"\n          :osubmit=\"handleAvatarSuccess\"\n          :show-file-list=\"true\"\n          :auto-upload=\"true\"\n          action=\"\"\n        >\n          <el-button size=\"small\" type=\"primary\">上传图片</el-button>\n        </el-upload>\n       <div class=\"imgList\">\n         <div  v-for=\"(item,index) in userForm.imgData\" :key=\"index\">\n          <el-image :src=\"item.imgUrl\" alt=\"\" style=\"width:100px;height: 100px;margin-left: 20px;\"\n                :preview-src-list=\"SrcList(item.img)\" :preview-teleported=\"true\" :infinite=\"false\"/>\n            \n         </div>\n       </div>\n       \n       <div class=\"pagination\">\n    <el-pagination background layout=\"total, sizes,prev, pager, next\"\n                  :page-sizes=\"[10, 50, 100]\" :total=\"userForm.total\"\n                  :current-page=\"userForm.form.pageNum\" :page-size=\"userForm.form.pageSize\"\n                  @current-change=\"getPageNum\"\n                  @size-change=\"getPageSize\" />\n  </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router';\nimport Storage from \"../../utils/DeviceStorage\";\nimport Message from '../../utils/Message';\nimport {reactive} from 'vue'\nimport { getImgPages } from '../../utils/Api';\nimport { uploads } from '../../utils/Api';;\nimport {onMounted} from 'vue'\n\nexport default {\n  name: \"login\",\n  \n setup () {\n   const userForm = reactive ({\n    form:{\n      pageNum: 1,\n      pageSize: 10,\n    },\n    collectPath:'/Users/zhaoxiangyuan/Downloads',\n    total: 0,\n    imgList:[],\n    imgData:[\n      {\"fileId\": 6,\n      \"filePath\": \"/Users/zhaoxiangyuan/Documents/378E28A8-69C8-493C-A1B3-511DC48897BA-1669190063504.jpg\",\n      \"fileName\": \"378E28A8-69C8-493C-A1B3-511DC48897BA-1669190063504.jpg\",\n      \"fileMd5\": \"64c123bb7edfa06fe353f0be466604c9\",\n      \"cteTime\": null,\n      \"imgUrl\": null,\n    },\n\n    ]\n   })\n\n   const getPage=()=>{\n \n    getImgPages(userForm.form).then((ref)=>{\n        userForm.imgData=ref.records;\n        userForm.total=ref.total\n        userForm.form.pageNum=ref.current\n        userForm.form.pageSize=ref.size\n    })\n   }\n   onMounted(()=>{\n\n     getPage()\n   \n   })\n   const getPageNum = (num) => {\n    userForm.form.pageNum=num;\n     getPage()\n   }\n\n   const  getPageSize = (size) => {\n     userForm.form.pageSize=size;\n     getPage()\n   }\n\n   const SrcList = (img) =>{\n    return img\n   }\n\n   const handleAvatarSuccess = ()=>{\n    console.log(\"onSuccessonSuccess======》\")\n     userForm.form.pageNum=1;\n     \n   }\n   const beforeAvatarUpload = (file) => {\n    const isJPG = file.type === \"image/jpeg\" || file.type === \"image/png\";\n      // const isLt2M = file.size / 1024 / 1024 < 2;\n      // if (!isJPG) {\n      //   Message.error(\"上传图片只能是 JPG、PNG 格式!\");\n      //   return false;\n      // }\n      // if (!isLt2M) {\n      //   Message.error(\"上传图片大小不能超过 2MB!\");\n      //   return false;\n      // }\n       let formData = new FormData();\n       formData.append(\"file\", file);\n\n       uploads(formData);\n\n      console.log(\"上传完成======》\"+file)\n   }\n\n\n   const handleOpenMenu = () => {\n\t      const file = document.getElementById('file')\n\t      file.click()\n\t    }\n      const  fileChange= (e) => {\n\t      try {\n\t        const fu = document.getElementById('file')\n\t        if (fu === null) return\n\t        // 只有electro可以获取到文件夹路径\n\t        this.form.collectPath = fu.files[0].path.replaceAll('\\\\', '/')\n\t      } catch (error) {\n\t        console.debug('choice file err:', error)\n\t      }\n\t    }\n\n   return {\n      SrcList,\n      userForm,\n      getPageSize,\n      getPageNum,\n      beforeAvatarUpload,\n      handleAvatarSuccess,\n      handleOpenMenu,fileChange\n   }\n },\n};\n</script>\n\n<style scoped>\n.padding{\n  padding: 20px;\n}\n.pagination {\n        width: 100%;\n        display: flex;\n        justify-content: right;\n        margin-top: 30px;\n    }\n.imgList{\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n}\n</style>\n\n"]},"metadata":{},"sourceType":"module"}